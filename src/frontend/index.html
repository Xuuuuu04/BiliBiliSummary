<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂìîÂì©ÂìîÂì©Insight | AI ËßÜÈ¢ëÊ∑±Â∫¶ÂàÜÊûêÂä©Êâã</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="research-redesign.css">
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 40'%3E%3Crect width='40' height='40' rx='8' fill='%23FB7299'/%3E%3Cpath d='M11 15H29V27H11V15Z' fill='white'/%3E%3Cpath d='M14 11L18 15' stroke='white' stroke-width='2.5' stroke-linecap='round'/%3E%3Cpath d='M26 11L22 15' stroke='white' stroke-width='2.5' stroke-linecap='round'/%3E%3Ccircle cx='16' cy='20' r='1.5' fill='%23FB7299'/%3E%3Ccircle cx='24' cy='20' r='1.5' fill='%23FB7299'/%3E%3Cpath d='M18 23.5H22' stroke='%23FB7299' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E">
    <!-- Marked.js Áî®‰∫éÊ∏≤ÊüìMarkdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/wordcloud@1.2.2/src/wordcloud2.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
    <header class="main-header">
        <div class="logo-area" onclick="goHome()">
            <svg class="bili-logo" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="40" height="40" rx="8" fill="white" />
                <!-- ‰øÆÊ≠£ÂêéÁöÑÂ§©Á∫øÔºåÁîªÂú®Â§¥È°∂Â§ñÈÉ® -->
                <path d="M13 8L17 14" stroke="#FB7299" stroke-width="2.5" stroke-linecap="round" />
                <path d="M27 8L23 14" stroke="#FB7299" stroke-width="2.5" stroke-linecap="round" />
                <!-- Ë∫´‰Ωì/ËÑ∏ -->
                <path d="M10 14H30V28H10V14Z" fill="#FB7299" />
                <circle cx="16" cy="20" r="1.5" fill="white" />
                <circle cx="24" cy="20" r="1.5" fill="white" />
                <path d="M18 24H22" stroke="white" stroke-width="1.5" stroke-linecap="round" />
            </svg>
            <div class="brand-text">
                <h1 class="art-title">ÂìîÂì©ÂìîÂì©<span class="gradient-text">Researcher</span></h1>
                <p class="slogan">Ê∑±Â∫¶Á†îÁ©∂ ¬∑ ËßÜÈ¢ëÊ¥ûÂØü ¬∑ ÂÖ®ËÉΩÂä©Êâã</p>
            </div>
        </div>
        <div class="header-actions">
            <div id="loginBtn" class="login-badge" title="BÁ´ôË¥¶Âè∑ÁôªÂΩïÁä∂ÊÄÅ">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <span>ÁôªÂΩïBÁ´ô</span>
            </div>
            <button id="homeBtn" class="btn-icon hidden" title="ËøîÂõû‰∏ªÈ°µ" onclick="goHome()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
            </button>
            <button id="guideBtn" class="btn-icon" title="‰ΩøÁî®ÊåáÂçó">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                    <line x1="12" y1="17" x2="12.01" y2="17"></line>
                </svg>
            </button>
            <button id="settingsBtn" class="btn-icon" title="ÂÖ®Â±ÄËÆæÁΩÆ">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path
                        d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1V15a2 2 0 0 1-2-2 2 2 0 0 1 2-2v-.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                    </path>
                </svg>
            </button>
            <a href="https://gitcode.com/mumu_xsy/Bilibili_Analysis_Helper" target="_blank" class="github-link">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                    <path
                        d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                </svg>
            </a>
        </div>
    </header>

    <div class="app-container">
        <main class="main-content">
            <!-- ÊêúÁ¥¢Âå∫Âüü -->
            <section class="search-section">
                <div class="search-box-container">
                    <!-- Ê®°ÂºèÂàáÊç¢Âô® -->
                    <div class="analysis-mode-switcher">

                        <button class="mode-btn" data-mode="research">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2.5">
                                <path
                                    d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                                </path>
                                <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                                <line x1="12" y1="22.08" x2="12" y2="12"></line>
                            </svg>
                            Ê∑±Â∫¶Á†îÁ©∂
                        </button>
                        <button class="mode-btn active" data-mode="video">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2.5">
                                <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                                <path d="M10 8l6 4-6 4V8z"></path>
                            </svg>
                            ËßÜÈ¢ëÂàÜÊûê
                        </button>
                        <button class="mode-btn" data-mode="article">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2.5">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10 9 9 9 8 9"></polyline>
                            </svg>
                            ‰∏ìÈ¢òËß£Êûê
                        </button>
                        <button class="mode-btn" data-mode="user">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2.5">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            Áî®Êà∑ÁîªÂÉè
                        </button>
                    </div>

                    <!-- Ê®°ÂºèÊèèËø∞ÊñáÊú¨ (Êñ∞) -->
                    <div id="modeDescription" class="mode-description mode-video animate-fade-in">
                        Áû¨ÊÅØÊèêÁÇºÔºåËÆ©ÊØè‰∏ÄÂ∏ßÂÖâÂΩ±ÈÉΩÊúâËøπÂèØÂæ™„ÄÇ
                    </div>

                    <div class="search-box">
                        <input type="text" id="videoUrl"
                            placeholder="Á≤òË¥¥ Bilibili ËßÜÈ¢ëÈìæÊé•Êàñ BV Âè∑Ôºå‰æãÂ¶ÇÔºöhttps://www.bilibili.com/video/BV1xx411c7mD"
                            autocomplete="off">
                        <button id="analyzeBtn" class="btn-primary">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                            ÂºÄÂßãÂàÜÊûê
                        </button>
                    </div>

                    <!-- Ê∑±Â∫¶Á†îÁ©∂Ê®°Âºè‰∏ãÁöÑÂø´Êç∑ÂéÜÂè≤ÊåâÈíÆ -->
                    <div id="researchHistoryShortcut" class="research-history-shortcut hidden">
                        <button class="btn-text-link" onclick="showResearchHistory()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Êü•Áúã‰ª•ÂæÄÁ†îÁ©∂Êä•Âëä
                        </button>
                    </div>

                    <!-- ÊêúÁ¥¢ÁªìÊûú‰∏ãÊãâÈù¢Êùø (Êñ∞) -->
                    <div id="searchResultsPanel" class="search-results-panel hidden">
                        <div class="results-header">
                            <span id="resultsCount">ÊâæÂà∞ 0 Êù°Áõ∏ÂÖ≥ÁªìÊûú</span>
                            <button id="closeResultsBtn" class="btn-icon-small">√ó</button>
                        </div>
                        <div id="resultsList" class="results-list">
                            <!-- Âä®ÊÄÅÂ°´ÂÖÖ -->
                        </div>
                    </div>
                    <div id="loginHint" class="login-hint hidden">
                        <span class="hint-icon">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                                <polyline points="10 17 15 12 10 7"></polyline>
                                <line x1="15" y1="12" x2="3" y2="12"></line>
                            </svg>
                        </span>
                        <p>ÁôªÂΩï B Á´ôÂêéÂàÜÊûêÔºåÂèØËß£ÈîÅ <strong>È´òËµûËØÑËÆ∫Ëß£Êûê</strong> ‰∏é <strong>ÂÆåÊï¥ÂºπÂπïËàÜÊÉÖ</strong></p>
                        <a href="#" id="hintLoginBtn">Á´ãÂç≥ÁôªÂΩï</a>
                    </div>
                </div>
            </section>

            <!-- Ê¨¢Ëøé/ÂäüËÉΩÂ±ïÁ§∫Âå∫Âüü -->
            <div id="welcomeSection" class="welcome-hero">
                <div class="init-recommendations">
                    <h3 class="section-title">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
                        </svg>
                        ‰ªäÊó•ÁÉ≠Èó®ËßÜÈ¢ëÊé®Ëçê
                    </h3>
                    <div class="recommendations-container">
                        <div id="initRelatedList" class="init-related-scroll">
                            <!-- Âä®ÊÄÅÊèíÂÖ•ÂàùÂßãÊé®ËçêËßÜÈ¢ë -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Âä†ËΩΩ‰∏éËøõÂ∫¶ -->
            <div id="loadingState" class="loading-state hidden">
                <div class="bili-tv-loading">
                    <svg class="bili-tv-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <!-- Â§©Á∫ø (ËÄ≥Êúµ) - ÁßªËá≥Â§ñÈÉ®‰∏îÂúÜÊ∂¶ -->
                        <path d="M35 20L45 35" stroke="#FB7299" stroke-width="6" stroke-linecap="round" />
                        <path d="M65 20L55 35" stroke="#FB7299" stroke-width="6" stroke-linecap="round" />
                        <!-- ÁîµËßÜÊú∫‰∏ª‰Ωì -->
                        <rect x="20" y="35" width="60" height="45" rx="12" fill="white" stroke="#FB7299"
                            stroke-width="5" />
                        <!-- Èù¢ÈÉ®Ë°®ÊÉÖ -->
                        <circle cx="40" cy="55" r="3" fill="#FB7299" />
                        <circle cx="60" cy="55" r="3" fill="#FB7299" />
                        <path d="M45 65Q50 70 55 65" stroke="#FB7299" stroke-width="3" fill="none"
                            stroke-linecap="round" />
                    </svg>
                    <div class="loading-bar-container">
                        <div class="loading-bar" id="progressBar"></div>
                    </div>
                </div>
                <div class="loading-content-box">
                    <p id="loadingText" class="loading-text">Ê≠£Âú®ÂàùÂßãÂåñ...</p>
                    <div id="streamingStatus" class="streaming-status hidden">
                        <span class="pulse-dot"></span>
                        <span id="streamingText">Ê≠£Âú®Êé•Êî∂ÂàÜÊûêÂÜÖÂÆπ...</span>
                        <span id="chunkCounter" class="chunk-counter">0</span>
                    </div>
                    <div id="loadingStepper" class="loading-stepper">
                        <!-- Áî±ËÑöÊú¨Ê†πÊçÆÊ®°ÂºèÂä®ÊÄÅÂ°´ÂÖÖÊ≠•È™§ -->
                    </div>
                </div>
            </div>

            <!-- ÁªìÊûúÂ±ïÁ§∫Âå∫Âüü -->
            <div id="resultArea" class="result-container hidden">
                <div class="content-wrapper">
                    <!-- Â∑¶‰æßÔºö‰æßËæπÊ†èÂå∫Âüü -->
                    <aside class="sidebar-area">
                        <nav id="sidebarNav" class="sidebar-nav">
                            <!-- ËßÜÈ¢ëÊ®°ÂºèÊåâÈíÆ -->
                            <button class="nav-btn active" data-tab="summary" data-show-on="video">
                                <span class="icon-box"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                        <polyline points="14 2 14 8 20 8"></polyline>
                                        <line x1="16" y1="13" x2="8" y2="13"></line>
                                        <line x1="16" y1="17" x2="8" y2="17"></line>
                                        <polyline points="10 9 9 9 8 9"></polyline>
                                    </svg></span>
                                ÂÜÖÂÆπÊÄªÁªì
                            </button>
                            <button class="nav-btn" data-tab="danmaku" data-show-on="video">
                                <span class="icon-box"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2">
                                        <path
                                            d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                                        </path>
                                    </svg></span>
                                ÂºπÂπï‰∫íÂä®
                            </button>
                            <button class="nav-btn" data-tab="comments" data-show-on="video">
                                <span class="icon-box"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2">
                                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                    </svg></span>
                                ËØÑËÆ∫Ëß£Êûê
                            </button>
                            <button class="nav-btn" data-tab="subtitle" data-show-on="video">
                                <span class="icon-box"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2">
                                        <line x1="8" y1="6" x2="21" y2="6"></line>
                                        <line x1="8" y1="12" x2="21" y2="12"></line>
                                        <line x1="8" y1="18" x2="21" y2="18"></line>
                                        <line x1="3" y1="6" x2="3.01" y2="6"></line>
                                        <line x1="3" y1="12" x2="3.01" y2="12"></line>
                                        <line x1="3" y1="18" x2="3.01" y2="18"></line>
                                    </svg></span>
                                ËßÜÈ¢ëÊñáÊú¨
                            </button>

                            <!-- ‰∏ìÊ†èÊ®°ÂºèÊåâÈíÆ -->
                            <button class="nav-btn hidden" data-tab="article_analysis" data-show-on="article">
                                <span class="icon-box"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2">
                                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                                    </svg></span>
                                Ê∑±Â∫¶Ëß£Êûê
                            </button>
                            <button class="nav-btn hidden" data-tab="article_content" data-show-on="article">
                                <span class="icon-box"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                        <polyline points="14 2 14 8 20 8"></polyline>
                                        <line x1="16" y1="13" x2="8" y2="13"></line>
                                        <line x1="16" y1="17" x2="8" y2="17"></line>
                                    </svg></span>
                                ‰∏ìÊ†èÂéüÊñá
                            </button>

                            <!-- Áî®Êà∑Ê®°ÂºèÊåâÈíÆ -->
                            <button class="nav-btn hidden" data-tab="user_portrait" data-show-on="user">
                                <span class="icon-box"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2">
                                        <path d="M12 20v-6M6 20V10M18 20V4"></path>
                                    </svg></span>
                                È£éÊ†ºÁîªÂÉè
                            </button>
                            <button class="nav-btn hidden" data-tab="user_works" data-show-on="user">
                                <span class="icon-box"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2">
                                        <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                                        <path d="M10 8l6 4-6 4V8z"></path>
                                    </svg></span>
                                ËøëÊúü‰ΩúÂìÅ
                            </button>

                            <!-- Ê∑±Â∫¶Á†îÁ©∂Ê®°ÂºèÊåâÈíÆ -->
                            <button class="nav-btn hidden" data-tab="research_report" data-show-on="research">
                                <span class="icon-box"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2">
                                        <path d="M12 2v20M2 12h20M12 2l10 10-10 10L2 12z"></path>
                                    </svg></span>
                                Á†îÁ©∂Êä•Âëä
                            </button>
                            <button class="nav-btn hidden" data-tab="research_process" data-show-on="research">
                                <span class="icon-box"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2">
                                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                                    </svg></span>
                                ÊÄùËÄÉËøáÁ®ã
                            </button>

                            <!-- ÂéÜÂè≤Êä•ÂëäÔºöÊîπ‰∏∫ÊôÆÈÄöÊåâÈíÆÔºå‰∏çÂÜç‰Ωú‰∏∫ TAB ÂàáÊç¢ -->
                            <button class="nav-btn-action hidden" data-show-on="research"
                                onclick="showResearchHistory()">
                                <span class="icon-box"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2">
                                        <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg></span>
                                ÂéÜÂè≤Êä•Âëä
                            </button>

                            <!-- ÈÄöÁî®ÊåâÈíÆ -->
                            <button class="nav-btn" data-tab="chat" data-show-on="video article user research">
                                <span class="icon-box"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2">
                                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                    </svg></span>
                                Êô∫ËÉΩÈóÆÁ≠î
                            </button>

                            <!-- Áõ∏ÂÖ≥ËßÜÈ¢ëÊé®Ëçê (‰æßËæπÊ†è) -->
                            <div id="relatedSection" class="related-sidebar-section hidden">
                                <h3 class="section-title">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
                                    </svg>
                                    Áõ∏ÂÖ≥Êé®Ëçê
                                </h3>
                                <div id="relatedList" class="related-vertical-list">
                                    <!-- Âä®ÊÄÅÊèíÂÖ•Áõ∏ÂÖ≥ËßÜÈ¢ë -->
                                </div>
                            </div>
                    </aside>

                    <div class="main-content-column">
                        <!-- ËßÜÈ¢ë‰ø°ÊÅØÂç°Áâá -->
                        <div class="video-info-card">
                            <div class="video-cover-wrapper">
                                <img id="videoCover" src="" alt="Video Cover" class="video-cover">
                                <span id="videoDuration" class="video-duration">00:00</span>
                            </div>
                            <div class="video-details">
                                <h2 id="videoTitle" class="video-title">ËßÜÈ¢ëÊ†áÈ¢ò</h2>
                                <div class="up-info">
                                    <span class="up-name">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="12" cy="7" r="4"></circle>
                                        </svg>
                                        <span id="upName">UP‰∏ª</span>
                                    </span>
                                </div>
                                <div class="video-stats">
                                    <span class="stat-item" title="Êí≠ÊîæÈáè">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <polygon points="5 3 19 12 5 21 5 3"></polygon>
                                        </svg>
                                        <span id="viewCount">0</span>
                                    </span>
                                    <span class="stat-item" title="ÁÇπËµûÊï∞">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path
                                                d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3">
                                            </path>
                                        </svg>
                                        <span id="likeCount">0</span>
                                    </span>
                                    <span class="stat-item" title="ËØÑËÆ∫Êï∞">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path
                                                d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                                            </path>
                                        </svg>
                                        <span id="commentCount">0</span>
                                    </span>
                                    <span class="stat-item" title="ÂºπÂπïÊï∞">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z">
                                            </path>
                                        </svg>
                                        <span id="danmakuCount">0</span>
                                    </span>
                                </div>
                                <div class="video-card-actions">
                                    <button id="reAnalyzeBtn" class="btn-small btn-outline">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M23 4v6h-6"></path>
                                            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                                        </svg>
                                        ÈáçÊñ∞ÂàÜÊûê
                                    </button>
                                    <a id="watchBiliBtn" href="" target="_blank" class="btn-small btn-outline">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                            <polyline points="15 3 21 3 21 9"></polyline>
                                            <line x1="10" y1="14" x2="21" y2="3"></line>
                                        </svg>
                                        Ë∑≥ËΩ¨ËßÇÁúã
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- UP‰∏ªÊ∑±Â∫¶ÁîªÂÉè (Êñ∞ÂäüËÉΩ) -->
                        <div id="upPortraitCard" class="up-portrait-card hidden">
                            <div class="portrait-header">
                                <img id="upFace" src="" class="up-face">
                                <div class="up-meta">
                                    <h4 id="upNameDetail">UP‰∏ª</h4>
                                    <span id="upSign" class="up-sign">Á≠æÂêçÂä†ËΩΩ‰∏≠...</span>
                                </div>
                                <div class="up-badge">AI Ê∑±Â∫¶ÁîªÂÉè</div>
                            </div>
                            <div id="upPortraitContent" class="portrait-body markdown-body">
                                Ê≠£Âú®ÂàÜÊûêUP‰∏ªÂàõ‰ΩúÈ£éÊ†º...
                            </div>
                        </div>

                        <!-- Âè≥‰æßÂÜÖÂÆπÂ±ïÁ§∫Âå∫ -->
                        <section class="content-display">
                            <div class="toolbar">
                                <div class="analysis-info">
                                    <span class="token-usage">TokenÊ∂àËÄó: <span id="tokenCount">0</span></span>
                                    <div id="analysisMeta" class="analysis-meta">
                                        <!-- Áî±ËÑöÊú¨Ê†πÊçÆÊ®°ÂºèÂä®ÊÄÅÂ°´ÂÖÖÂÖÉÊï∞ÊçÆ -->
                                    </div>
                                </div>
                                <div class="tool-actions">
                                    <button id="copyBtn" class="btn-icon" title="Â§çÂà∂ÂΩìÂâçÂÜÖÂÆπ">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                        </svg>
                                    </button>
                                    <button id="downloadPdfBtn" class="btn-icon hidden" title="‰∏ãËΩΩ PDF Êä•Âëä">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                            <polyline points="14 2 14 8 20 8"></polyline>
                                            <line x1="16" y1="13" x2="8" y2="13"></line>
                                            <line x1="16" y1="17" x2="8" y2="17"></line>
                                            <polyline points="10 9 9 9 8 9"></polyline>
                                        </svg>
                                    </button>
                                    <button id="downloadBtn" class="btn-icon" title="‰∏ãËΩΩMarkdown">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                            <polyline points="7 10 12 15 17 10"></polyline>
                                            <line x1="12" y1="15" x2="12" y2="3"></line>
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <div id="tabContents">
                                <!-- ËßÜÈ¢ë‰∏ìÁî® -->
                                <div id="summaryContent" class="tab-pane active markdown-body">
                                    <div class="empty-state">
                                        <p>Á≠âÂæÖÂàÜÊûêÁªìÊûú...</p>
                                    </div>
                                </div>
                                <div id="danmakuContent" class="tab-pane markdown-body">
                                    <div id="danmakuWordCloudContainer" class="word-cloud-wrapper hidden">
                                        <h3 class="section-title">
                                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2.5">
                                                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5">
                                                </path>
                                            </svg>
                                            ‰∫íÂä®ÂÖ≥ÈîÆËØç‰∫ë
                                        </h3>
                                        <div class="word-cloud-canvas-container"><canvas id="danmakuCanvas"></canvas>
                                        </div>
                                    </div>
                                    <div id="danmakuAnalysisResult"></div>
                                </div>
                                <div id="commentsContent" class="tab-pane markdown-body">
                                    <div id="topCommentsList" class="top-comments-section"></div>
                                    <div id="commentsAnalysisResult"></div>
                                </div>
                                <div id="subtitleContent" class="tab-pane raw-text-pane">
                                    <pre id="rawSubtitleText"></pre>
                                </div>

                                <!-- ‰∏ìÊ†è‰∏ìÁî® -->
                                <div id="articleAnalysisContent" class="tab-pane markdown-body"></div>
                                <div id="articleOriginalContent" class="tab-pane raw-text-pane"></div>

                                <!-- Áî®Êà∑‰∏ìÁî® -->
                                <div id="userPortraitContentPane" class="tab-pane markdown-body"></div>
                                <div id="userWorksContent" class="tab-pane">
                                    <div id="userWorksList" class="user-works-grid"></div>
                                </div>

                                <!-- Ê∑±Â∫¶Á†îÁ©∂‰∏ìÁî® -->
                                <div id="smartUpChatContent" class="tab-pane chat-pane">
                                    <div class="chat-container compact-chat">
                                        <div class="chat-header">
                                            <div class="chat-header-title">Êô∫ËÉΩÂ∞èUP ÂØπËØù</div>
                                            <div class="chat-header-actions">
                                                <button id="toggleSmartUpFullscreen" class="btn-icon-small"
                                                    title="ÂàáÊç¢ÂÖ®Â±è">
                                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2">
                                                        <path
                                                            d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3">
                                                        </path>
                                                    </svg>
                                                </button>
                                                <button id="clearChatBtn" class="btn-icon-small" title="Ê∏ÖÁ©∫ËÅäÂ§©ËÆ∞ÂΩï">
                                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2">
                                                        <path
                                                            d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                                        </path>
                                                        <line x1="10" y1="11" x2="10" y2="17"></line>
                                                        <line x1="14" y1="11" x2="14" y2="17"></line>
                                                    </svg>
                                                </button>
                                            </div>
                                        </div>
                                        <div id="smartUpMessages" class="chat-messages">
                                            <div class="message assistant">
                                                <div class="message-content">
                                                    ‰Ω†Â•ΩÔºÅÊàëÊòØ‰Ω†ÁöÑÊô∫ËÉΩÂ∞èUP„ÄÇÊúâ‰ªÄ‰πàÊàëÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÂêóÔºüÊàë‰ºöËá™ÈÄÇÂ∫îÈóÆÈ¢òÂ§çÊùÇÂ∫¶ÔºåÂø´ÈÄüÊ£ÄÁ¥¢BÁ´ôËßÜÈ¢ëÂíåÂÖ®ÁΩëËµÑËÆØ‰∏∫ÊÇ®Êèê‰æõÁ≤æÂáÜÂõûÁ≠î„ÄÇ</div>
                                            </div>
                                        </div>
                                        <div id="smartUpProgress" class="chat-progress-container hidden">
                                            <!-- Âä®ÊÄÅÂ±ïÁ§∫ AI ÊÄùËÄÉ‰∏éÂ∑•ÂÖ∑Ë∞ÉÁî®ËøõÂ∫¶ -->
                                        </div>
                                        <div class="chat-input-area">
                                            <textarea id="smartUpInput" placeholder="ËæìÂÖ•ÊÇ®ÁöÑÈóÆÈ¢òÔºåÊàë‰ºö‰∏∫ÊÇ®Ê£ÄÁ¥¢ËßÜÈ¢ëÂπ∂‰ΩúÁ≠î..."></textarea>
                                            <button id="smartUpSendBtn" class="btn-primary">
                                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                                    stroke="currentColor" stroke-width="2">
                                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div id="researchReportContent" class="tab-pane markdown-body">
                                    <!-- ÊÇ¨ÊµÆÁõÆÂΩï (Êñ∞Â¢û) -->
                                    <div id="reportTOC" class="report-toc hidden">
                                        <div class="toc-header">
                                            <h4>üìë ÁõÆÂΩïÂØºËà™</h4>
                                            <button id="tocToggleBtn" class="btn-icon-small">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                    stroke="currentColor" stroke-width="2">
                                                    <polyline points="6 9 12 15 18 9"></polyline>
                                                </svg>
                                            </button>
                                        </div>
                                        <div id="tocList" class="toc-list">
                                            <!-- Âä®ÊÄÅÁîüÊàêÁõÆÂΩï -->
                                        </div>
                                    </div>
                                    <div class="empty-state">
                                        <p>Á≠âÂæÖÊ∑±Â∫¶Á†îÁ©∂ÂºÄÂßã...</p>
                                        <button class="history-btn" onclick="showResearchHistory()">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                            Êü•ÁúãÂéÜÂè≤Á†îÁ©∂Êä•Âëä
                                        </button>
                                    </div>
                                </div>
                                <div id="researchProcessContent" class="tab-pane">
                                    <!-- ÂÖ®Â±ÄÊäòÂè†ÊéßÂà∂ -->
                                    <div class="timeline-controls">
                                        <div class="timeline-controls-title">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                                            </svg>
                                            ÊÄùËÄÉËøáÁ®ãÊó∂Èó¥Á∫ø
                                        </div>
                                        <div class="timeline-controls-buttons">
                                            <button class="timeline-control-btn" onclick="collapseAllTimeline()">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                    stroke="currentColor" stroke-width="2">
                                                    <polyline points="4 14 12 6 20 14"></polyline>
                                                    <line x1="12" y1="6" x2="12" y2="22"></line>
                                                </svg>
                                                ÂÖ®ÈÉ®ÊäòÂè†
                                            </button>
                                            <button class="timeline-control-btn" onclick="expandAllTimeline()">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                    stroke="currentColor" stroke-width="2">
                                                    <polyline points="4 10 12 18 20 10"></polyline>
                                                    <line x1="12" y1="18" x2="12" y2="2"></line>
                                                </svg>
                                                ÂÖ®ÈÉ®Â±ïÂºÄ
                                            </button>
                                        </div>
                                    </div>

                                    <div id="researchTimeline" class="research-timeline">
                                        <!-- Âä®ÊÄÅÊèíÂÖ•ÊÄùËÄÉËøáÁ®ãÂíåÂ∑•ÂÖ∑Ë∞ÉÁî® -->
                                    </div>
                                    <!-- ËµÑÊ∫êÊ±†‰æßËæπÊ†è (Êñ∞Â¢û) -->
                                    <div id="resourcePool" class="resource-pool hidden">
                                        <div class="resource-header">
                                            <h3>üìö Á†îÊä•ËµÑÊ∫êÊ±†</h3>
                                            <span id="resourceCount" class="badge">0</span>
                                        </div>
                                        <div id="resourceList" class="resource-list">
                                            <!-- Âä®ÊÄÅÊèíÂÖ•Â∑≤Êî∂ÈõÜÁöÑËµÑÊ∫ê -->
                                            <div class="empty-resource-state">
                                                ÊöÇÊó†Êî∂ÈõÜÂà∞ÁöÑËµÑÊñô
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- ÈÄöÁî® -->
                                <div id="chatContent" class="tab-pane chat-pane">
                                    <div class="chat-container">
                                        <div id="chatMessages" class="chat-messages">
                                            <div class="message assistant">
                                                <div class="message-content">‰Ω†Â•ΩÔºÅÊàëÊòØ‰Ω†ÁöÑÊô∫ËÉΩÂàÜÊûêÂä©Êâã„ÄÇü§ñ

                                                    ÊàëÂ∑≤ÁªèÂÆåÊï¥ÈòÖËØª‰∫ÜËøô‰ªΩÂàÜÊûêÊä•ÂëäÔºåÂåÖÊã¨ÂÜÖÂÆπÊÄªÁªì„ÄÅÂºπÂπïËàÜÊÉÖ„ÄÅËØÑËÆ∫ËßÇÁÇπÁ≠âÊâÄÊúâ‰ø°ÊÅØ„ÄÇ

                                                    ‰Ω†ÂèØ‰ª•ÈóÆÊàëÔºö
                                                    ‚Ä¢ "Ëøô‰∏™ÂÜÖÂÆπÁöÑÊ†∏ÂøÉËßÇÁÇπÊòØ‰ªÄ‰πàÔºü"
                                                    ‚Ä¢ "ÂºπÂπï/ËØÑËÆ∫ÊúÄÂÖ≥Ê≥®Âì™‰∫õÁÇπÔºü"
                                                    ‚Ä¢ "ËØ¶ÁªÜËß£Èáä‰∏Ä‰∏ãÊüê‰∏™Á´†ËäÇ"
                                                    ‚Ä¢ "Êúâ‰ªÄ‰πàÊï∞ÊçÆ‰∫ÆÁÇπÔºü"

                                                    Êàë‰ºöÂü∫‰∫éÂÆåÊï¥ÁöÑÂàÜÊûêÊä•Âëä‰∏∫‰Ω†Êèê‰æõÁ≤æÂáÜ„ÄÅÁªìÊûÑÂåñÁöÑÂõûÁ≠îÔºÅ</div>
                                            </div>
                                        </div>
                                        <div class="chat-input-area">
                                            <textarea id="chatInput"
                                                placeholder="ËæìÂÖ•ÂÖ≥‰∫éÊ≠§ÂÜÖÂÆπÁöÑÈóÆÈ¢òÔºåÊàë‰ºöÂü∫‰∫éÂàÜÊûêÊä•Âëä‰∏∫ÊÇ®Ëß£Á≠î..."></textarea>
                                            <button id="sendMsgBtn" class="btn-primary">
                                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                                    stroke="currentColor" stroke-width="2">
                                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
        </main>

        <!-- È°µÈù¢Â∫ïÈÉ® -->
        <footer class="main-footer">
            <div class="footer-container">
                <div class="footer-tags">
                    <span class="tag"># AI Summary</span>
                    <span class="tag"># Multimodal</span>
                    <span class="tag"># Video Analysis</span>
                    <span class="tag"># Bilibili</span>
                </div>

                <div class="footer-content">
                    <div class="footer-section">
                        <h5>ÂÖ≥‰∫éÈ°πÁõÆ</h5>
                        <p>BiliInsight ÊòØ‰∏ÄÊ¨æÂü∫‰∫éÂ§ßÊ®°ÂûãÁöÑËßÜÈ¢ëÂÜÖÂÆπÁêÜËß£Â∑•ÂÖ∑ÔºåÊó®Âú®Â∏ÆÂä©Áî®Êà∑Âø´ÈÄüËé∑ÂèñËßÜÈ¢ëÂπ≤Ë¥ßÔºåÊ∑±ÊåñËßÜÈ¢ë‰ª∑ÂÄº„ÄÇ</p>
                        <div class="footer-links">
                            <a href="https://gitcode.com/mumu_xsy/Bilibili_Analysis_Helper" target="_blank">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                                </svg>
                                GitCode ‰ªìÂ∫ì
                            </a>
                        </div>
                    </div>

                    <div class="footer-section">
                        <h5>ÂºÄÂèëËÄÖ & ÊÑüË∞¢</h5>
                        <p>Created by <a href="https://gitcode.com/mumu_xsy" target="_blank" class="highlight"
                                style="text-decoration: none;">mumu_xsy</a></p>
                        <p>ÊÑüË∞¢ <a href="https://github.com/Nemo2011/bilibili-api" target="_blank" class="highlight"
                                style="text-decoration: none;">Bilibili-API</a> Á§æÂå∫ÂèäÂÖ∂Ë¥°ÁåÆËÄÖÊèê‰æõÁöÑÊäÄÊúØÊîØÊåÅ„ÄÇ</p>
                    </div>

                    <div class="footer-section">
                        <h5>ÁÆóÂäõ‰∏éÊ®°ÂûãÊîØÊåÅ</h5>
                        <div class="vendor-grid">
                            <a href="https://cloud.siliconflow.cn/" target="_blank" class="vendor-item"
                                title="SiliconFlow Êèê‰æõÂº∫Â§ßÁÆóÂäõÂä†ÈÄü" style="text-decoration: none; color: inherit;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M12.463 3.125c-.244-.167-.577-.167-.821 0l-7.394 5c-.267.18-.423.475-.423.792v6.248c0 .317.156.612.423.792l7.394 5c.244.167.577.167.821 0l7.394-5c.267-.18.423-.475.423-.792V8.917c0-.317-.156-.612-.423-.792l-7.394-5z"
                                        fill="currentColor" fill-opacity=".15" />
                                    <path
                                        d="M11.75 8a.75.75 0 0 1 .75.75v3.25h3.25a.75.75 0 0 1 0 1.5h-4a.75.75 0 0 1-.75-.75v-4a.75.75 0 0 1 .75-.75z"
                                        fill="currentColor" />
                                    <path
                                        d="M4.671 8.917c0-.317.156-.612.423-.792l7.394-5c.244-.167.577-.167.821 0l7.394 5c.267.18.423.475.423.792v6.248c0 .317-.156.612-.423.792l-7.394 5c-.244.167-.577.167-.821 0l-7.394-5a.952.952 0 0 1-.423-.792V8.917zm7.394-3.834L5.86 9.225v5.632l6.205 4.198 6.205-4.198V9.225l-6.205-4.142z"
                                        fill="currentColor" />
                                </svg>
                                <span>SiliconCloud</span>
                            </a>
                            <a href="https://tongyi.aliyun.com/" target="_blank" class="vendor-item"
                                title="ÈÄö‰πâÂçÉÈóÆ Qwen Á≥ªÂàóÊ®°ÂûãÊèê‰æõÊ†∏ÂøÉÊô∫ËÉΩ" style="text-decoration: none; color: inherit;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18z" fill="currentColor"
                                        fill-opacity=".15" />
                                    <path d="M12 4.5a7.5 7.5 0 1 1 0 15 7.5 7.5 0 0 1 0-15z" stroke="currentColor"
                                        stroke-width="1.5" />
                                    <path d="M8.5 12h7M12 8.5v7" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" />
                                    <path d="M10 10l4 4M14 10l-4 4" stroke="currentColor" stroke-width="1.5"
                                        stroke-linecap="round" />
                                </svg>
                                <span>Qwen</span>
                            </a>
                        </div>
                    </div>

                    <div class="footer-section">
                        <h5>ÂÖçË¥£Â£∞Êòé</h5>
                        <ul class="disclaimer-list">
                            <li>AI ÁîüÊàêÁöÑËßÜÈ¢ëÂàÜÊûêÁªìÊûú‰ªÖ‰æõÂèÇËÄÉÔºå‰∏ç‰ª£Ë°®Êú¨È°πÁõÆËßÇÁÇπÔºå‰∫¶‰∏ç‰øùËØÅÁªùÂØπÂáÜÁ°ÆÊÄß„ÄÇ</li>
                            <li>Êú¨È°πÁõÆ‰ªÖ‰æõÂ≠¶‰π†‰∫§ÊµÅ‰ΩøÁî®ÔºåËØ∑Âú®ÈÅµÂÆàÁõ∏ÂÖ≥Ê≥ïÂæãÊ≥ïËßÑÂèä B Á´ôÂçèËÆÆÁöÑÂâçÊèê‰∏ã‰ΩøÁî®„ÄÇ</li>
                            <li>ËßÜÈ¢ëÂèäËØÑËÆ∫ÁâàÊùÉÂΩíÂéü‰ΩúËÄÖÂíå Bilibili ÊâÄÊúâÔºåÊú¨È°πÁõÆ‰∏çÂ≠òÂÇ®‰ªª‰ΩïËßÜÈ¢ëÊ∫êÊñá‰ª∂„ÄÇ</li>
                        </ul>
                    </div>
                </div>

                <div class="footer-bottom">
                    <p>&copy; 2025 BiliInsight. ‰ªÖ‰æõÂ≠¶‰π†‰∫§ÊµÅ‰ΩøÁî®„ÄÇ</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- ÁôªÂΩïÊ®°ÊÄÅÊ°Ü -->
    <div id="loginModal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>BÁ´ôÊâ´Á†ÅÁôªÂΩï</h2>
            <div id="qrcodeContainer" class="qrcode-container">
                <div id="qrcode" class="qrcode-img"></div>
                <p id="loginStatus">ËØ∑‰ΩøÁî®Bilibili AppÊâ´Á†Å</p>
            </div>
        </div>
    </div>

    <!-- ÂéÜÂè≤Á†îÁ©∂Êä•ÂëäÂºπÁ™ó -->
    <div id="historyModal" class="modal-overlay hidden">
        <div class="modal-content history-modal">
            <div class="modal-header">
                <h3>ÂéÜÂè≤Á†îÁ©∂Êä•Âëä</h3>
                <button class="close-btn" onclick="closeHistoryModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="historyList" class="history-list">
                    <!-- Âä®ÊÄÅÂä†ËΩΩÂéÜÂè≤ÂàóË°® -->
                </div>
            </div>
        </div>
    </div>

    <!-- ÊèêÁ§∫Ê°Ü -->
    <div id="toast" class="toast hidden">ÊèêÁ§∫‰ø°ÊÅØ</div>

    <!-- ËÆæÁΩÆ‰æßËæπÊäΩÂ±â -->
    <div id="settingsDrawer" class="drawer hidden">
        <div class="drawer-overlay"></div>
        <div class="drawer-content">
            <div class="drawer-header">
                <h3>ÂÖ®Â±ÄËÆæÁΩÆ</h3>
                <button class="close-drawer">&times;</button>
            </div>
            <div class="drawer-body">
                <div class="settings-group">
                    <h4>AI ÊúçÂä°ÈÖçÁΩÆ</h4>
                    <div class="setting-item">
                        <label>API ‰ª£ÁêÜÂú∞ÂùÄ (Base URL)</label>
                        <input type="text" id="apiBaseInput" placeholder="https://api.openai.com/v1">
                    </div>
                    <div class="setting-item">
                        <label>API Key</label>
                        <input type="password" id="apiKeyInput" placeholder="sk-...">
                        <p class="setting-hint">ÊÇ®ÂèØ‰ª•ÂâçÂæÄ <a href="https://cloud.siliconflow.cn/me/account/ak"
                                target="_blank">SiliconFlow ÊéßÂà∂Âè∞</a> ÂÖçË¥πÊ≥®ÂÜåÂπ∂Ëé∑Âèñ API Key</p>
                    </div>
                    <div class="setting-item">
                        <label>ÈªòËÆ§ÂàÜÊûêÊ®°Âûã (VL/Â§öÊ®°ÊÄÅ)</label>
                        <input type="text" id="modelInput" placeholder="‰æãÂ¶Ç: Qwen/Qwen2-VL-72B-Instruct">
                    </div>
                    <div class="setting-item">
                        <label>ÂØπËØùÈóÆÁ≠îÊ®°Âûã (ÈïøÊñáÊú¨/ÈÄªËæë)</label>
                        <input type="text" id="qaModelInput" placeholder="‰æãÂ¶Ç: Qwen/Qwen2.5-72B-Instruct">
                    </div>
                    <div class="setting-item">
                        <label>Ê∑±Â∫¶Á†îÁ©∂Ê®°Âûã (Reasoning/Thinking)</label>
                        <input type="text" id="deepResearchModelInput" placeholder="‰æãÂ¶Ç: moonshotai/Kimi-K2-Thinking">
                        <p class="setting-hint">
                            üí° ÊèêÁ§∫ÔºöÈÉ®ÂàÜÊ∑∑ÂêàÊÄÅÊ®°ÂûãÔºàÂ¶Ç DeepSeek-V3„ÄÅKimi-K2ÔºâÊîØÊåÅÊÄùËÄÉÊ®°ÂºèÔºåÂèØÂºÄÂêØ‰∏ãÊñπÂºÄÂÖ≥Ëé∑ÂæóÊõ¥Ê∑±ÂÖ•ÁöÑÊé®ÁêÜËÉΩÂäõ„ÄÇ
                        </p>
                    </div>
                    <div class="setting-item"
                        style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <label style="margin-bottom: 4px;">ÂêØÁî®ÊÄùËÄÉÊ®°Âºè (Êô∫ËÉΩÂ∞èUP)</label>
                            <p class="setting-hint" style="margin: 0;">‰∏∫Êô∫ËÉΩÂ∞èUPÂêØÁî®Ê∑±Â∫¶ÊÄùËÄÉÔºåÈÄÇÂêàÂ§çÊùÇÊé®ÁêÜ‰ªªÂä°</p>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="enableSmartUpThinking">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item"
                        style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <label style="margin-bottom: 4px;">ÂêØÁî®ÊÄùËÄÉÊ®°Âºè (Ê∑±Â∫¶Á†îÁ©∂)</label>
                            <p class="setting-hint" style="margin: 0;">‰∏∫Ê∑±Â∫¶Á†îÁ©∂ÂêØÁî®Ê∑±Â∫¶ÊÄùËÄÉÔºåËé∑ÂæóÊõ¥ÂÖ®Èù¢ÁöÑÂàÜÊûê</p>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="enableResearchThinking">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>Exa Search API Key (Áî®‰∫éÊ∑±Â∫¶ËÅîÁΩëÊêúÁ¥¢)</label>
                        <input type="password" id="exaApiKeyInput" placeholder="exa-...">
                        <p class="setting-hint">
                            üí° ÊèêÁ§∫ÔºöÂâçÂæÄ <a href="https://dashboard.exa.ai/" target="_blank"
                                style="color: var(--bili-blue); font-weight: bold; text-decoration: underline;">Exa.ai
                                ÂÆòÁΩë</a> <strong>ÂÖçË¥πÊ≥®ÂÜå</strong> Âç≥ÂèØËé∑ÂæóÊØèÊúàÂÖçË¥πÈ¢ùÂ∫¶ÁöÑ API KeyÔºåËÆ© Agent ÂÖ∑Â§áÂÖ®ÁΩëÊ∑±Â∫¶ÊêúÁ¥¢‰∏éÂÆûÊó∂ËµÑËÆØËé∑ÂèñËÉΩÂäõ„ÄÇ
                        </p>
                    </div>
                </div>
                <div class="settings-group">
                    <h4>ÁïåÈù¢ÂÅèÂ•Ω</h4>
                    <div class="setting-item"
                        style="display: flex; justify-content: space-between; align-items: center;">
                        <label style="margin-bottom: 0;">Ê∑±Ëâ≤Ê®°Âºè</label>
                        <label class="switch">
                            <input type="checkbox" id="darkModeToggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="drawer-footer">
                <button id="saveSettingsBtn" class="btn-primary" style="height: 40px; padding: 0 20px;">‰øùÂ≠òËÆæÁΩÆ</button>
            </div>
        </div>
    </div>

    <!-- ÂâçÁ´ØÂ∑•ÂÖ∑ÂáΩÊï∞Â∫ì (ÈáçÊûÑÊ®°Âùó) -->
    <script src="js/utils/helpers.js"></script>

    <!-- API Ê®°Âùó (ÈáçÊûÑÊèêÂèñ) -->
    <script src="js/api/bilibili-api.js"></script>
    <script src="js/api/video-api.js"></script>
    <script src="js/api/research-api.js"></script>

    <!-- UI Ê®°Âùó (ÈáçÊûÑÊèêÂèñ) -->
    <script src="js/ui/progress.js"></script>
    <script src="js/ui/tabs.js"></script>
    <script src="js/ui/modes.js"></script>

    <!-- ‰∏ªÁ®ãÂ∫èËÑöÊú¨ -->
    <script src="script.js"></script>
    <!-- ‰ΩøÁî®ÊåáÂçóÊ®°ÊÄÅÊ°Ü -->
    <div id="guideModal" class="modal hidden">
        <div class="modal-content guide-modal-content">
            <div class="modal-header guide-header">
                <div class="guide-title-area">
                    <svg class="guide-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                    </svg>
                    <h2>‰ΩøÁî®ÊåáÂçó & Â£∞Êòé</h2>
                </div>
                <button class="close-modal guide-close">&times;</button>
            </div>
            <div id="guideContent" class="modal-body guide-body markdown-body">
                <!-- Áî±ËÑöÊú¨Ê∏≤Êüì -->
            </div>
            <div class="modal-footer guide-footer">
                <div class="support-area">
                    <span>ËßâÂæóÂ•ΩÁî®ÔºüÂéªÁÇπ‰∏™ Star Âêß ‚≠ê</span>
                    <div class="support-btns">
                        <a href="https://gitcode.com/mumu_xsy/Bilibili_Analysis_Helper" target="_blank"
                            class="btn-mini btn-primary-mini">GitCode ‰ªìÂ∫ì</a>
                        <button id="guideDonateBtn" class="btn-mini btn-outline-mini">‚ù§Ô∏è ËµûÂä©ÊîØÊåÅ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÊçêËµ†‰∫åÁª¥Á†ÅÂºπÁ™ó (Â§çÁî®ÊàñÊñ∞Âª∫) -->
    <div id="donateModal" class="modal hidden">
        <div class="modal-content donate-modal-content">
            <div class="modal-header">
                <h2>‚ù§Ô∏è ÊÑüË∞¢‰Ω†ÁöÑÊîØÊåÅ</h2>
                <button id="closeDonateBtn" class="close-modal">&times;</button>
            </div>
            <div class="modal-body donate-body">
                <img src="assets/donate.jpg" alt="ÊçêËµ†‰∫åÁª¥Á†Å" class="donate-qr">
                <p>‰Ω†ÁöÑÊâìËµèÊòØÈ°πÁõÆÊåÅÁª≠Êõ¥Êñ∞ÁöÑÊúÄÂ§ßÂä®ÂäõÔºÅ</p>
            </div>
        </div>
    </div>
</body>

</html>